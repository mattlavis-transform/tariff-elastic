clear

# Delete the index
curl -H 'Content-Type: application/json' -XDELETE 'http://localhost:9200/commodities'

# Recreate the index with the right mappings
curl -H 'Content-Type: application/json' -XPUT 'http://localhost:9200/commodities' --data-binary @elasticsearch/create_index.json

# Check the mappings are right
# curl -H 'Content-Type: application/json' -XGET 'http://localhost:9200/commodities/_mapping'

# Import the commodities data
curl -H 'Content-Type: application/json' -XPOST 'localhost:9200/commodities/_doc/_bulk?pretty' --data-binary @resources/ndjson/commodities.ndjson

# Count the results
curl -H 'Content-Type: application/json' -XGET 'http://localhost:9200/commodities/_count'
